<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Kế thừa giao diện hiện có -->
        <record id="view_employee_form_inherit" model="ir.ui.view">
            <field name="name">hr.employee.form.inherit</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
                <data>
                    <page name="personal_information" string="Private Information" groups="hr.group_hr_user">
                        <!-- <notebook> -->
                            <!-- <page name="personal_information" string="Private Information" groups="hr.group_hr_user">-->
                        <group>
                            
                            <group string="Mối quan hệ của Nhân viên"> 
                                <field name="relationship_ids" mode="tree,kanban">
                                    <tree editable="bottom">
                                        <field name="name" attrs="{'name': 'name'}" groups="hr.group_hr_user"/>
                                        <field name="relation_type" attrs="{'name': 'relation_type'}" groups="hr.group_hr_user"/>
                                    </tree>
                                </field>
                            </group>
                            <group string="Hồ sơ Y tế" name="medical_records_page">
                                <field name="medical_record_ids" widget="one2many_list">
                                    <tree>
                                        <field name="date" attrs="{'name': 'date'}"/>
                                        <field name="diagnosis" attrs="{'name': 'diagnosis'}" groups="hr.group_hr_user"/>
                                        <field name="treatment" attrs="{'name': 'treatment'}" groups="hr.group_hr_user"/>
                                    </tree>
                                </field>
                            </group>
                        </group>    
                        <!-- </notebook>
                    </xpath> -->
                    </page>        
                    <page name="personal_information" string="Private Information" groups="hr.group_hr_user">
                        <group string="Thông tin liên quan thu nhập">     
                        
                                <!-- Thêm các trường liên quan đến lương vào giao diện biểu mẫu -->
                                <field name="labor_contract" widget="binary" filename="labor_contract_filename"/>
                                <field name="appendix_contract" widget="binary" filename="appendix_contract_filename"/>
                                <field name="salary_adjustment" widget="binary" filename="salary_adjustment_filename"/>
                            
                       </group> 
                    </page>
                </data>
            </field>
        </record>
   
        <record id="employee_report_action" model="ir.actions.report">
        <field name="name">Báo cáo nhân viên</field>
        <field name="model">employee.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">employee.report_employee</field>
        <field name="file">employee.report_employee</field>
        </record>

        <template id="report_employee">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="report">
                    <div class="page">
                        <h1>Báo cáo nhân viên</h1>
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr>
                                    <th>Họ tên</th>
                                    <th>Ngày sinh</th>
                                    <th>Trình độ</th>
                                    <th>Chuyên ngành</th>
                                    <th>Bộ phận</th>
                                    <th>Số sổ BHXH</th>
                                    <th>Ghi chú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="report.get_employee_data()" t-as="employee">
                                    <tr>
                                        <td><span t-esc="employee.name"/></td>
                                        <td><span t-esc="employee.birthday"/></td>
                                        <td><span t-esc="employee.certificate"/></td>
                                        <td><span t-esc="employee.study_field"/></td>
                                        <td><span t-esc="employee.department_id"/></td>
                                        <td><span t-esc="employee.ssnid"/></td>
                                        <td><span t-esc="employee.notes"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </template>

        <menuitem id="menu_employee_report" name="Báo cáo nhân viên" parent="hr.menu_hr_root" sequence="20"/>
        <menuitem id="menu_employee_report_list" name="Danh sách báo cáo nhân viên" parent="menu_employee_report" action="employee_report_action" sequence="10"/>

        
    </data>
</odoo>

